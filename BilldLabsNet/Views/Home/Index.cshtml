@{
    ViewBag.Title = "Billd Labs";
}

@section style {
    }

<div id="console"></div>

<div id="response"></div>

@section scripts {
    <!--Script references. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.2.2.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <!--Custom Script-->
    <script>
        $(function () {
            // Reference the auto-generated proxy for the hub.
            var hub = $.connection.consoleHub;
            // Create a function that the hub can call back to display messages.
            hub.client.updateResponse = function (responseMessage) {
                // Add the message to the page.
                $('#response').text(responseMessage)
            };

            // Start the connection.
            $.connection.hub.start().done(function () {
                document.body.addEventListener('keydown', function (e) {
                    if (e.key == 'Enter') {
                        //send the value to the server.
                        hub.server.send($("#console").text());
                    } else {
                        updateConsole(e);
                    }

                });

                $('#sendmessage').click(function () {
                    // Call the Send method on the hub.
                    hub.server.send($('#displayname').val(), $('#message').val());
                    // Clear text box and reset focus for next comment.
                    $('#message').val('').focus();
                });
            });
        });

        function updateConsole(e) {
            var console = document.getElementById('console');
            switch (e.key) {
                case 'Alt':
                    break;
                case 'Shift':
                    break;
                case 'Tab':
                    break;
                case 'Caps Lock':
                    break;
                case 'Control':
                    break;
                case 'Meta':
                    break;
                case 'Backspace':
                    console.textContent = console.textContent.substring(0, console.textContent.length - 1);
                    break;
                case 'Space Bar':
                    console.textContent = console.textContext + ' ';
                    break;
                default:
                    console.textContent = console.textContent + e.key;
                    break;
            }
        }
        // This optional function html-encodes messages for display in the page.
        function htmlEncode(value) {
            var encodedValue = $('<div />').text(value).html();
            return encodedValue;
        }


    </script>
}